Pipeline Summary:
- Pipeline ID: synthetic-generator-v2__synthetic_sensor_gated_01_file_arrival_watcher.py
- Name: file_arrival_watcher
- Purpose: Monitor for transaction files, validate schema, and load to PostgreSQL
- Execution model: batch
- Topology pattern: sensor_gated
- Notes: Sensor task gates the processing pipeline

Control Flow:
- Dependencies (directed edges):
  - wait_for_file -> validate_schema
  - validate_schema -> load_db

Data Artifacts / I-O Identifiers:
- file: /data/incoming/transactions_{{ ds_nodash }}.csv (Transaction file with pattern transactions_YYYYMMDD.csv)
- table: public.transactions (Target table for transaction data)

External Systems:
- filesystem: incoming directory (/data/incoming)
- database: PostgreSQL (localhost:5432)

Pipeline Steps:
1. wait_for_file — wait_for_file
  - Objective: Wait for transaction file arrival
  - Inputs: file:/data/incoming/transactions_{{ ds_nodash }}.csv
  - Outputs: file:/data/incoming/transactions_{{ ds_nodash }}.csv
  - Step parameters:
    - poke_interval=30
    - timeout=86400
    - mode=poke
  - Failure handling:
    - retries: 2
    - retry delay: PT5M
2. validate_schema — validate_schema
  - Objective: Validate the schema of the incoming transactions file
  - Inputs: file:/data/incoming/transactions_{{ ds_nodash }}.csv
  - Outputs: validation_result:Schema validation result
  - Failure handling:
    - retries: 2
    - retry delay: PT5M
3. load_db — load_db
  - Objective: Load validated data to PostgreSQL database
  - Inputs: file:/data/incoming/transactions_{{ ds_nodash }}.csv
  - Outputs: table:public.transactions
  - Failure handling:
    - retries: 2
    - retry delay: PT5M

Scheduling:
- Schedule type: cron
- Schedule expression: @daily
- Start date: 2024-01-01
- Catchup/backfill: False
