Pipeline Summary:
- Pipeline ID: Ferlab-Ste-Justine__clin-pipelines-dags__etl_import_mondo.py
- Name: etl_import_<data_artifact>
- Purpose: ETL pipeline for importing <data_artifact> ontology data - downloads <data_artifact> OBO file, normalizes terms using Spark, indexes to Elasticsearch, publishes results, and sends notification
- Execution model: batch
- Topology pattern: linear
- Business domain: bioinformatics/clinical genomics
- Notes: Pipeline includes version checking to skip processing if data is already up-to-date

Control Flow:
- Dependencies (directed edges):
  - params_validate -> download_mondo_terms
  - download_mondo_terms -> normalized_mondo_terms
  - normalized_mondo_terms -> index_mondo_terms
  - index_mondo_terms -> publish_mondo
  - publish_mondo -> slack

External Systems:
- http_api: GitHub Mondo Releases (https://github.com/monarch-initiative/mondo/releases)
- object_storage: S3 Data Lake (cqgc-{env}-app-datalake)
- database: Elasticsearch
- cloud_service: Kubernetes
- other: Slack

Pipeline Steps:
1. params_validate — params_validate
  - Objective: Validate pipeline parameters
  - Mechanism: python_callable
  - Step parameters:
    - color
2. download_mondo_terms — download_mondo_terms
  - Objective: Download <data_artifact> OBO file from GitHub releases and upload to S3
  - Mechanism: python_callable
3. normalized_mondo_terms — normalized_mondo_terms
  - Objective: Normalize <data_artifact> terms using Spark processing
  - Mechanism: spark_job
  - Step parameters:
    - spark_class=bio.ferlab.HPOMain
    - spark_config=config-etl-medium
    - k8s_context=ETL
    - exclude_root=MONDO:0700096
4. index_mondo_terms — index_mondo_terms
  - Objective: Index normalized <data_artifact> terms to Elasticsearch
  - Mechanism: spark_job
  - Step parameters:
    - spark_class=bio.ferlab.clin.etl.es.Indexer
    - spark_config=config-etl-singleton
    - index_name=mondo
    - index_type=mondo_terms
    - config_file=config/{env}.conf
5. publish_mondo — publish_mondo
  - Objective: Publish indexed <data_artifact> data
  - Mechanism: spark_job
  - Step parameters:
    - color={color}
6. slack — slack
  - Objective: Send completion notification
  - Mechanism: notification

Scheduling:
- Schedule type: manual
- Start date: 2022-01-01
