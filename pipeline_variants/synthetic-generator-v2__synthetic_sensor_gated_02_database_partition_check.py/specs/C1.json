{
  "spec_version": "1.0",
  "pipeline_id": "database_partition_check_etl",
  "pipeline_name": "database_partition_check_etl",
  "source": {
    "unique_key": null,
    "repo": "synthetic-generator-v2",
    "file_path": "synthetic/synthetic_sensor_gated_02_database_partition_check.py",
    "repo_url": "https://github.com/internal/synthetic-dags",
    "detected_airflow_version": "2.x",
    "sampled_version": null,
    "sampled_commit": null,
    "sampled_time": null,
    "source_fingerprint_sha256": "f6be9eae31f3bda509600f00149ed822e1ea85dbf00e2443ea9722a8cfeb486b"
  },
  "summary": {
    "purpose": "Daily ETL pipeline that waits for database partition availability, then extracts, transforms, and loads incremental orders data",
    "business_domain": null,
    "execution_model": "batch",
    "topology_pattern": "sensor_gated",
    "notes": null
  },
  "schedule": {
    "schedule_type": null,
    "schedule_expression": null,
    "timezone": null,
    "start_date": null,
    "catchup_backfill": null
  },
  "control_flow": {
    "edges": [
      {
        "from": "wait_partition",
        "to": "extract_incremental"
      },
      {
        "from": "extract_incremental",
        "to": "transform"
      },
      {
        "from": "transform",
        "to": "load"
      }
    ],
    "parallel_groups": [],
    "branch_points": [],
    "gates": [
      {
        "type": "wait_poll",
        "step": "wait_partition",
        "waits_for": "database partition availability"
      }
    ]
  },
  "external_systems": [
    {
      "type": "database",
      "name": "database_conn",
      "identifier": null,
      "details": [
        "SQL database with partitioned orders table"
      ],
      "auth": []
    }
  ],
  "data_artifacts": {
    "files": [],
    "tables": [
      {
        "identifier": "orders",
        "description": "Source orders table with daily partitions"
      },
      {
        "identifier": "fact_orders",
        "description": "Target data warehouse table for orders"
      }
    ],
    "buckets": [],
    "topics": []
  },
  "steps": [
    {
      "step_id": "wait_partition",
      "name": "wait_partition",
      "objective": "Wait for daily partition to become available in the orders table",
      "mechanism": "wait_poll",
      "inputs": [
        {
          "type": "database",
          "identifier": "orders",
          "description": "Partitioned orders table"
        }
      ],
      "outputs": [
        {
          "type": "signal",
          "identifier": "partition_available",
          "description": "Signal that partition is ready"
        }
      ],
      "external_system_refs": [
        {
          "type": "database",
          "name": "database_conn",
          "identifier": null
        }
      ],
      "parameters": [
        {
          "key": "sql_query",
          "value": "SELECT 1 FROM information_schema.partitions WHERE table_name = 'orders' AND partition_name LIKE CONCAT(DATE_FORMAT(CURRENT_DATE, 'p%Y%m%d'), '%')"
        },
        {
          "key": "timeout",
          "value": "3600"
        },
        {
          "key": "poke_interval",
          "value": "300"
        }
      ],
      "env_infra": {
        "env_vars": [],
        "mounts": [],
        "network": null,
        "other": []
      },
      "failure_handling": {
        "retries": 2,
        "retry_delay": "PT5M",
        "timeout": "PT1H",
        "alerts": [],
        "idempotency": []
      }
    },
    {
      "step_id": "extract_incremental",
      "name": "extract_incremental",
      "objective": "Extract new orders from the partitioned table",
      "mechanism": "python_callable",
      "inputs": [
        {
          "type": "database",
          "identifier": "orders",
          "description": "Partitioned orders table for current date"
        }
      ],
      "outputs": [
        {
          "type": "data",
          "identifier": "extracted_orders",
          "description": "Extracted orders data"
        }
      ],
      "external_system_refs": [
        {
          "type": "database",
          "name": "database_conn",
          "identifier": null
        }
      ],
      "parameters": [],
      "env_infra": {
        "env_vars": [],
        "mounts": [],
        "network": null,
        "other": []
      },
      "failure_handling": {
        "retries": 2,
        "retry_delay": "PT5M",
        "timeout": null,
        "alerts": [],
        "idempotency": []
      }
    },
    {
      "step_id": "transform",
      "name": "transform",
      "objective": "Transform extracted orders data",
      "mechanism": "python_callable",
      "inputs": [
        {
          "type": "data",
          "identifier": "extracted_orders",
          "description": "Extracted orders data"
        }
      ],
      "outputs": [
        {
          "type": "data",
          "identifier": "transformed_orders",
          "description": "Transformed and cleaned orders data"
        }
      ],
      "external_system_refs": [],
      "parameters": [],
      "env_infra": {
        "env_vars": [],
        "mounts": [],
        "network": null,
        "other": []
      },
      "failure_handling": {
        "retries": 2,
        "retry_delay": "PT5M",
        "timeout": null,
        "alerts": [],
        "idempotency": []
      }
    },
    {
      "step_id": "load",
      "name": "load",
      "objective": "Load transformed orders to target system",
      "mechanism": "python_callable",
      "inputs": [
        {
          "type": "data",
          "identifier": "transformed_orders",
          "description": "Transformed orders data"
        }
      ],
      "outputs": [
        {
          "type": "database",
          "identifier": "fact_orders",
          "description": "Updated fact_orders table in data warehouse"
        }
      ],
      "external_system_refs": [],
      "parameters": [],
      "env_infra": {
        "env_vars": [],
        "mounts": [],
        "network": null,
        "other": []
      },
      "failure_handling": {
        "retries": 2,
        "retry_delay": "PT5M",
        "timeout": null,
        "alerts": [],
        "idempotency": []
      }
    }
  ],
  "quality": {
    "confidence": "high",
    "extraction_warnings": [
      "Original code uses Airflow-specific constructs (SqlSensor, PythonOperator) which have been translated to orchestrator-agnostic equivalents"
    ]
  },
  "generation": {
    "generated_at": "2025-12-16T14:42:34.213977Z"
  },
  "variant": {
    "class_id": "C1",
    "class_name": "NO_SCHEDULING",
    "canonical_pipeline_id": "synthetic-generator-v2__synthetic_sensor_gated_02_database_partition_check.py",
    "spec_pipeline_id": "database_partition_check_etl"
  }
}